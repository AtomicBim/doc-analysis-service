# –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–í–µ—Ä—Å–∏—è:** 2.1.0 (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ OpenRouter)

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è (–¢–ó) –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π (–¢–£).

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª—å—à–∏–µ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑:
- **Google Gemini API** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **OpenRouter** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ Docker.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å                              ‚îÇ
‚îÇ                                                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ  ‚îÇ   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å     ‚îÇ                                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ HTTP                                                     ‚îÇ
‚îÇ            ‚ñº                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          HTTP           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   Gradio UI        ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ   API Service    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (–ë–ï–ó –ø—Ä–æ–∫—Å–∏)      ‚îÇ                        ‚îÇ   (–° –ø—Ä–æ–∫—Å–∏)     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Port: 7861        ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ   Port: 8002     ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       JSON              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                           ‚îÇ            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                            ‚îÇ
                                              SOCKS5 Proxy  ‚îÇ VPN
                                              172.17.0.1    ‚îÇ
                                              :10808        ‚îÇ
                                                            ‚ñº
                                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                ‚îÇ Google Gemini API /   ‚îÇ
                                                ‚îÇ   OpenRouter          ‚îÇ
                                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°–µ—Ä–≤–∏—Å 1: Gradio UI (`ui-service/`)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **–°–µ—Ç—å**: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å (–ë–ï–ó –ø—Ä–æ–∫—Å–∏).
- **–ü–æ—Ä—Ç**: 7861
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (docx, pdf).
  - –í—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞–Ω–∞–ª–∏–∑–∞.
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Markdown.
  - –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ API-—Å–µ—Ä–≤–∏—Å—É –ø–æ HTTP.

### –°–µ—Ä–≤–∏—Å 2: API Service (`api-service/`)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
- **–°–µ—Ç—å**: –ß–µ—Ä–µ–∑ VPN/SOCKS5 –ø—Ä–æ–∫—Å–∏.
- **–ü–æ—Ä—Ç**: 8002
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç UI.
  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è AI.
  - **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã:**
    1. **`gemini`**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π Gemini File API –¥–ª—è –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
    2. **`openrouter`**: –°–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é Gemini, –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å –≤ OpenRouter.
  - –í–æ–∑–≤—Ä–∞—Ç JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞.

## üîê –°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ–∫—Å–∏ | IP/–î–æ–º–µ–Ω | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|--------|----------|------------|
| **Gradio UI** | ‚ùå –ù–ï–¢ | `0.0.0.0:7861` | –î–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–∏ |
| **API Service** | ‚úÖ –î–ê | `172.17.0.1:10808` | SOCKS5 –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω–µ—à–Ω–∏–º API |
| **Gemini/OpenRouter** | - | —á–µ—Ä–µ–∑ VPN | –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã |

**‚ùó –í–ê–ñ–ù–û:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ SOCKS5 –ø—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º!

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ:** –§–∞–π–ª—ã `doc_analysis_app.py`, `Dockerfile` –∏ `requirements.txt` –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é —Å—Ç–∞—Ä–æ–π –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è**.

```
doc-analysis-service/
‚îú‚îÄ‚îÄ api-service/                  # ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–π API-—Å–µ—Ä–≤–∏—Å (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ analysis_api.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ .env.example              # ‚úÖ –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ ui-service/                   # ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–π UI-—Å–µ—Ä–≤–∏—Å (Gradio)
‚îÇ   ‚îú‚îÄ‚îÄ gradio_ui.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml           # ‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ doc_analysis_app.py          # ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–æ–Ω–æ–ª–∏—Ç
‚îú‚îÄ‚îÄ Dockerfile                   # ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π Dockerfile
‚îú‚îÄ‚îÄ requirements.txt             # ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

1.  –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `api-service/` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:
    ```bash
    cp api-service/.env.example api-service/.env
    ```

2.  –û—Ç–∫—Ä–æ–π—Ç–µ `api-service/.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ –∫–ª—é—á–∏. **`GEMINI_API_KEY` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤—Å–µ–≥–¥–∞.**

    ```env
    # "gemini" –∏–ª–∏ "openrouter"
    AI_PROVIDER=gemini

    # –ö–ª—é—á –¥–ª—è Google Gemini API (–û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
    GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á_gemini

    # –ú–æ–¥–µ–ª—å –¥–ª—è Gemini
    GEMINI_MODEL=gemini-1.5-flash

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è OpenRouter (–µ—Å–ª–∏ AI_PROVIDER=openrouter) ---
    # –ö–ª—é—á –¥–ª—è OpenRouter API
    OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_openrouter

    # –ú–æ–¥–µ–ª—å –≤ OpenRouter (–Ω–∞–ø—Ä–∏–º–µ—Ä, google/gemini-1.5-flash, anthropic/claude-3-haiku)
    OPENROUTER_MODEL=google/gemini-1.5-flash

    # –û–±—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ "–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏" –º–æ–¥–µ–ª–∏
    TEMPERATURE=0.1
    ```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ SOCKS –ø—Ä–æ–∫—Å–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `docker-compose.yml` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ IP-–∞–¥—Ä–µ—Å –ø—Ä–æ–∫—Å–∏:
```yaml
environment:
  - HTTPS_PROXY=socks5://172.17.0.1:10808  # ‚Üê –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å
  - HTTP_PROXY=socks5://172.17.0.1:10808
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
docker-compose up -d --build
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –õ–æ–≥–∏ API-—Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f doc-analysis-api

# –õ–æ–≥–∏ UI-—Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f doc-analysis-ui
```

### –®–∞–≥ 5: –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **Gradio UI:** http://localhost:7861
- **API Docs:** http://localhost:8002/docs

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Gradio –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω:
1.  **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã**: –¢–ó, –ø—Ä–æ–µ–∫—Ç–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) –¢–£.
2.  **–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: —Å—Ç–∞–¥–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–∏–ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.
3.  **–ù–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"**.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –≤ –≤–∏–¥–µ Markdown-—Ç–∞–±–ª–∏—Ü—ã —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Ä–∞–∑–±–æ—Ä–æ–º –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –æ–±—â–µ–π —Å–≤–æ–¥–∫–æ–π.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API-—Å–µ—Ä–≤–∏—Å (`api-service/.env`)

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç". –ö–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî `AI_PROVIDER`, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞.

### Docker Compose

**–î–ª—è API-—Å–µ—Ä–≤–∏—Å–∞ (—Å –ø—Ä–æ–∫—Å–∏):**
```yaml
doc-analysis-api:
  environment:
    - HTTPS_PROXY=socks5://172.17.0.1:10808
    - HTTP_PROXY=socks5://172.17.0.1:10808
    - NO_PROXY=localhost,127.0.0.1,doc-analysis-ui
```

**–î–ª—è UI-—Å–µ—Ä–≤–∏—Å–∞ (–±–µ–∑ –ø—Ä–æ–∫—Å–∏):**
```yaml
doc-analysis-ui:
  environment:
    - API_SERVICE_URL=http://doc-analysis-api:8000
    # –ù–ï–¢ –ü–†–û–ö–°–ò!
```

## üìä API Endpoints

### `GET /`
Health check API-—Å–µ—Ä–≤–∏—Å–∞.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "service": "Document Analysis API",
  "provider": "gemini",
  "model": "gemini-1.5-flash"
}
```

### `POST /analyze`
–ê–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `multipart/form-data`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–æ—Ä–º—ã:**
- `stage` (string): –°—Ç–∞–¥–∏—è (e.g., "–§–≠").
- `req_type` (string): –¢–∏–ø —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (e.g., "–¢–ó").
- `tz_document` (file): –§–∞–π–ª —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
- `doc_document` (file): –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
- `tu_document` (file, optional): –§–∞–π–ª —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (JSON):**
```json
{
  "stage": "–§–≠",
  "req_type": "–¢–ó",
  "requirements": [
    {
      "number": 1,
      "requirement": "–¢–µ–∫—Å—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è",
      "status": "–ò—Å–ø–æ–ª–Ω–µ–Ω–æ",
      "confidence": 95,
      "solution_description": "–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è",
      "reference": "–î–æ–∫—É–º–µ–Ω—Ç, —Å—Ç—Ä. 12",
      "discrepancies": "",
      "recommendations": ""
    }
  ],
  "summary": "–û–±—â–∞—è —Å–≤–æ–¥–∫–∞ –∞–Ω–∞–ª–∏–∑–∞"
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç API –Ω–∞–ø—Ä—è–º—É—é —Å –ø–æ–º–æ—â—å—é cURL

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã `test_tz.txt` –∏ `test_doc.txt`.

```bash
# –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∞
echo "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –¢–ó." > test_tz.txt
echo "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è." > test_doc.txt

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
curl -X POST http://localhost:8002/analyze \
  -F "stage=–§–≠" \
  -F "req_type=–¢–ó" \
  -F "tz_document=@test_tz.txt" \
  -F "doc_document=@test_doc.txt"
```

### –¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Gemini API –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø—Ä–æ–∫—Å–∏ –∏ –≤–∞–ª–∏–¥–µ–Ω –ª–∏ `GEMINI_API_KEY`.

```bash
docker-compose exec doc-analysis-api python -c "
import os
import google.generativeai as genai
genai.configure(api_key=os.getenv('GEMINI_API_KEY'))
model = genai.GenerativeModel('gemini-1.5-flash')
response = model.generate_content('–ü—Ä–∏–≤–µ—Ç!')
print(response.text)
"
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### API-—Å–µ—Ä–≤–∏—Å (`api-service/requirements.txt`)
- `fastapi`: –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
- `uvicorn`: ASGI —Å–µ—Ä–≤–µ—Ä.
- `google-generativeai`: –ö–ª–∏–µ–Ω—Ç –¥–ª—è Google Gemini API.
- `openai`: –ö–ª–∏–µ–Ω—Ç –¥–ª—è OpenRouter (–∏ –¥—Ä—É–≥–∏—Ö OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö API).
- `python-dotenv`: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
- `python-multipart`: –û–±—Ä–∞–±–æ—Ç–∫–∞ `multipart/form-data` –≤ FastAPI.

### UI-—Å–µ—Ä–≤–∏—Å (`ui-service/requirements.txt`)
- `gradio`: –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- `requests`: HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ API.
- `python-dotenv`: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

1.  –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
2.  –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É —Ñ–∏—á–∏ (`git checkout -b feature/amazing-feature`).
3.  –°–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç (`git commit -m 'Add amazing feature'`).
4.  –ó–∞–ø—É—à—å—Ç–µ (`git push origin feature/amazing-feature`).
5.  –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.