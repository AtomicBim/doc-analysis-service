# –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–í–µ—Ä—Å–∏—è:** 2.1.0

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è (–¢–ó) –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π (–¢–£).

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª—å—à–∏–µ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (LLM) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è –¥–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
- **Google Gemini API** (—Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **OpenRouter** (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —à–∏—Ä–æ–∫–æ–º—É —Å–ø–µ–∫—Ç—Ä—É –º–æ–¥–µ–ª–µ–π)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —á–µ—Ä–µ–∑ `docker-compose`.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å                              ‚îÇ
‚îÇ                                                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ  ‚îÇ   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å     ‚îÇ                                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ HTTP                                                     ‚îÇ
‚îÇ            ‚ñº                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          HTTP           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   Gradio UI        ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ   API Service    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (ui-service)      ‚îÇ                        ‚îÇ (api-service)    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Port: 7861        ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ   Port: 8002     ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       JSON              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                           ‚îÇ            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                            ‚îÇ
                                              SOCKS5 Proxy  ‚îÇ VPN
                                              (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) ‚îÇ
                                                            ‚ñº
                                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                ‚îÇ Google Gemini API /   ‚îÇ
                                                ‚îÇ      OpenRouter       ‚îÇ
                                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1.  **`ui-service` (Gradio UI)**
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞.
    *   **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Gradio, Requests.
    *   **–°–µ—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ç–∏, –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–æ—Ä—Ç—É `7861`. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–∫—Å–∏.
    *   **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `api-service`.

2.  **`api-service` (FastAPI)**
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å LLM.
    *   **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** FastAPI, Google Gemini API, OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–ª–∏–µ–Ω—Ç.
    *   **–°–µ—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –∑–∞ SOCKS5 –ø—Ä–æ–∫—Å–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω–µ—à–Ω–∏–º API (Google, OpenRouter) —á–µ—Ä–µ–∑ VPN.
    *   **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:**
        *   `gemini`: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π Gemini File API –¥–ª—è –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
        *   `openrouter`: –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é Gemini, –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å –≤ OpenRouter.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
doc-analysis-service/
‚îú‚îÄ‚îÄ api-service/                  # ‚úÖ –°–µ—Ä–≤–∏—Å API (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ analysis_api.py           #    - –õ–æ–≥–∏–∫–∞ API
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt          #    - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                #    - Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ .env.example              #    - –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ ui-service/                   # ‚úÖ –°–µ—Ä–≤–∏—Å UI (Gradio)
‚îÇ   ‚îú‚îÄ‚îÄ gradio_ui.py              #    - –õ–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt          #    - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                #    - Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml            # ‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ README.md                     # üìñ –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .gitignore
‚îÇ
‚îú‚îÄ‚îÄ doc_analysis_app.py           # ‚ùå –£–°–¢–ê–†–ï–õ–û: –ß–∞—Å—Ç—å —Å—Ç–∞—Ä–æ–π –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ Dockerfile                    # ‚ùå –£–°–¢–ê–†–ï–õ–û: Dockerfile –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–∞
‚îî‚îÄ‚îÄ requirements.txt              # ‚ùå –£–°–¢–ê–†–ï–õ–û: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–∞
```
> **‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –§–∞–π–ª—ã `doc_analysis_app.py`, `Dockerfile` –∏ `requirements.txt` –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è**.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

1.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è API-—Å–µ—Ä–≤–∏—Å–∞:
    ```bash
    cp api-service/.env.example api-service/.env
    ```

2.  –û—Ç–∫—Ä–æ–π—Ç–µ `api-service/.env` –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ API-–∫–ª—é—á–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

    ```env
    # –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞: "gemini" –∏–ª–∏ "openrouter"
    AI_PROVIDER=gemini

    # –ö–ª—é—á –¥–ª—è Google Gemini API (–û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –¥–ª—è –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤)
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–∂–∏–º–µ "gemini" –∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ "openrouter"
    GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á_gemini

    # –ú–æ–¥–µ–ª—å –¥–ª—è Gemini (–Ω–∞–ø—Ä–∏–º–µ—Ä, gemini-1.5-flash)
    GEMINI_MODEL=gemini-1.5-flash

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è OpenRouter (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –µ—Å–ª–∏ AI_PROVIDER=openrouter) ---
    # –ö–ª—é—á –¥–ª—è OpenRouter API
    OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_openrouter

    # –ú–æ–¥–µ–ª—å –≤ OpenRouter (–Ω–∞–ø—Ä–∏–º–µ—Ä, google/gemini-1.5-flash, anthropic/claude-3-haiku)
    OPENROUTER_MODEL=google/gemini-1.5-flash

    # –û–±—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ "–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏" –º–æ–¥–µ–ª–∏ (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞)
    TEMPERATURE=0.1
    ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏

–í —Ñ–∞–π–ª–µ `docker-compose.yml` –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å SOCKS5 –ø—Ä–æ–∫—Å–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ `doc-analysis-api`.

```yaml
# docker-compose.yml

services:
  doc-analysis-api:
    # ...
    environment:
      - HTTPS_PROXY=socks5://172.17.0.1:10808  # ‚Üê –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∏ –ø–æ—Ä—Ç –≤–∞—à–µ–≥–æ –ø—Ä–æ–∫—Å–∏
      - HTTP_PROXY=socks5://172.17.0.1:10808
      - NO_PROXY=localhost,127.0.0.1,doc-analysis-ui
```

### –®–∞–≥ 3: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
docker-compose up -d --build
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–±–µ—Ä—ë—Ç –æ–±—Ä–∞–∑—ã –¥–ª—è UI –∏ API —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∏—Ö –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

### –®–∞–≥ 4: –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

-   **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Gradio):** [http://localhost:7861](http://localhost:7861)
-   **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger):** [http://localhost:8002/docs](http://localhost:8002/docs)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1.  –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
2.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã: –¢–ó, –ø—Ä–æ–µ–∫—Ç–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¢–£.
3.  –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∞–ª–∏–∑–∞: —Å—Ç–∞–¥–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–∏–ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.
4.  –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"**.
5.  –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—è–≤—è—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ API-—Å–µ—Ä–≤–∏—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f doc-analysis-api

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ UI-—Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f doc-analysis-ui
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ cURL

–≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É API-—Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ UI.

1.  –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
    ```bash
    echo "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –¢–ó." > test_tz.txt
    echo "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è." > test_doc.txt
    ```

2.  –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å –Ω–∞ –∞–Ω–∞–ª–∏–∑:
    ```bash
    curl -X POST http://localhost:8002/analyze \
      -F "stage=–§–≠" \
      -F "req_type=–¢–ó" \
      -F "tz_document=@test_tz.txt" \
      -F "doc_document=@test_doc.txt"
    ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Gemini API –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤–µ—Ä–Ω–æ –∏ `GEMINI_API_KEY` –≤–∞–ª–∏–¥–µ–Ω.

```bash
docker-compose exec doc-analysis-api python -c "
import os
import google.generativeai as genai
try:
    genai.configure(api_key=os.getenv('GEMINI_API_KEY'))
    model = genai.GenerativeModel('gemini-1.5-flash')
    response = model.generate_content('–ü—Ä–∏–≤–µ—Ç!')
    print('–£—Å–ø–µ—à–Ω–æ! –û—Ç–≤–µ—Ç –æ—Ç Gemini API:')
    print(response.text)
except Exception as e:
    print(f'–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Gemini API: {e}')
"
```

## API Endpoints

### `GET /`

-   **–û–ø–∏—Å–∞–Ω–∏–µ:** Health check –¥–ª—è API-—Å–µ—Ä–≤–∏—Å–∞.
-   **–û—Ç–≤–µ—Ç:** JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ, —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ –∏ –º–æ–¥–µ–ª–∏.
    ```json
    {
      "status": "ok",
      "service": "Document Analysis API",
      "provider": "gemini",
      "model": "gemini-1.5-flash"
    }
    ```

### `POST /analyze`

-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `multipart/form-data`.
-   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–æ—Ä–º—ã:**
    -   `stage` (string): –°—Ç–∞–¥–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–§–≠").
    -   `req_type` (string): –¢–∏–ø —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¢–ó").
    -   `tz_document` (file): –§–∞–π–ª —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
    -   `doc_document` (file): –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
    -   `tu_document` (file, optional): –§–∞–π–ª —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π.
-   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (JSON):**
    ```json
    {
      "stage": "–§–≠",
      "req_type": "–¢–ó",
      "requirements": [
        {
          "number": 1,
          "requirement": "–¢–µ–∫—Å—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –¢–ó",
          "status": "–ò—Å–ø–æ–ª–Ω–µ–Ω–æ",
          "confidence": 95,
          "solution_description": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞–∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.",
          "reference": "–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–∞–∑–¥–µ–ª/–ø—É–Ω–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Å—Ç—Ä. X",
          "discrepancies": "–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å).",
          "recommendations": "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)."
        }
      ],
      "summary": "–û–±—â–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∞–Ω–∞–ª–∏–∑–∞."
    }
    ```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
