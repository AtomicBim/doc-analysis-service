# Промпты для анализа документации

Эта папка содержит промпты для различных стадий строительной документации.

## Структура файлов

### Промпты для извлечения требований (Шаг 1)
- `requirements_extraction_prompt.txt` - Извлечение требований из ТЗ

### Промпты для этапов анализа (Шаг 2)
- `stage1_metadata_extraction_prompt.txt` - Извлечение метаданных страниц (штампы, заголовки)
- `stage2_page_relevance_prompt.txt` - Оценка релевантности страниц для требований
- `stage3_detailed_analysis_prompt.txt` - Детальный анализ требований
- `stage4_contradictions_prompt.txt` - Поиск противоречий в документации
- `analysis_system_prompt_template.txt` - Шаблон system prompt для анализа

### Промпты для анализа по стадиям проекта
- `gk_prompt.txt` - Стадия "Градостроительная концепция (ГК)"
- `fe_prompt.txt` - Стадия "Форэскиз (ФЭ)" 
- `ep_prompt.txt` - Стадия "Эскизный проект (ЭП)"

## Использование

Промпты автоматически загружаются при запуске API сервиса через функции:
- `load_requirements_extraction_prompt()` - для извлечения требований из ТЗ
- `load_stage_prompts()` - для промптов этапов анализа (Stage 1-4)
- `load_prompts()` - для промптов стадий проекта (ГК, ФЭ, ЭП)

## Переменные в промптах

Некоторые промпты содержат плейсхолдеры, которые заполняются динамически:

**stage2_page_relevance_prompt.txt:**
- `{page_count}` - количество страниц
- `{pages_description}` - описание метаданных страниц
- `{requirements_text}` - список требований

**stage3_detailed_analysis_prompt.txt:**
- `{requirements_text}` - список требований для анализа
- `{requirements_count}` - количество требований
- `{available_pages}` - список номеров доступных страниц (через запятую)
- `{page_count}` - количество доступных страниц

**stage4_contradictions_prompt.txt:**
- `{requirements_summary}` - краткая сводка проанализированных требований
- `{sections}` - список разделов документации
- `{page_count}` - количество анализируемых страниц

**analysis_system_prompt_template.txt:**
- `{req_type}` - тип требований (ТЗ, ТЗ+ТУ)

## Формат файлов

Каждый файл содержит XML-подобную структуру с тегами:
- `<задача>` - описание задачи анализа
- `<критерии_оценки>` - критерии для оценки выполнения требований
- `<дополнительные_указания>` - дополнительные инструкции (при наличии)

## Редактирование

Для изменения промптов отредактируйте соответствующие файлы. Изменения вступят в силу при следующем перезапуске API сервиса.

