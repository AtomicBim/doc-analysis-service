# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª–∏)
cd doc-analysis-service

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –¥–ª—è API
cp api-service/.env.example api-service/.env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π OpenAI API –∫–ª—é—á
# OPENAI_API_KEY=sk-your-key-here
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫

**–í–∞—Ä–∏–∞–Ω—Ç 1: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã** (API + React UI + Gradio UI)
```bash
docker-compose up --build
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –¢–æ–ª—å–∫–æ React UI** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
docker-compose up --build doc-analysis-api doc-analysis-ui-react
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –¢–æ–ª—å–∫–æ Gradio UI**
```bash
docker-compose up --build doc-analysis-api doc-analysis-ui
```

### 3Ô∏è‚É£ –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:

| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –ê–¥—Ä–µ—Å |
|-----------|-------|
| üé® **React UI** | http://localhost:7862 |
| üñ•Ô∏è **Gradio UI** | http://localhost:7861 |
| üîå **API Docs** | http://localhost:8002/docs |

### 4Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### React UI (http://localhost:7862)

1. **–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–¥–∏—é –ø—Ä–æ–µ–∫—Ç–∞**: –ì–ö / –§–≠ / –≠–ü
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã**:
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ (–¢–ó) - PDF
   - –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - PDF
   - (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è (–¢–£) - PDF
3. **–ù–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"**
4. **–î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** (–æ–±—ã—á–Ω–æ 5-15 –º–∏–Ω—É—Ç)
5. **–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
   - –°–ª–µ–≤–∞: —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Å –∞–Ω–∞–ª–∏–∑–æ–º
   - –°–ø—Ä–∞–≤–∞: PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –ö–ª–∏–∫–∞–π—Ç–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ PDF

#### Gradio UI (http://localhost:7861)

1. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–¥–∏—é –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑"
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 5Ô∏è‚É£ –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –∑–∞—Ç–µ–º:
docker-compose down
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `api-service/config.py` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
# –ú–æ–¥–µ–ª—å OpenAI
OPENAI_MODEL = "gpt-4o-mini"  # –∏–ª–∏ "gpt-4o"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
STAGE1_MAX_PAGES = 150
STAGE2_MAX_PAGES = 100

# –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
STAGE3_BATCH_SIZE = 10

# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π (–æ—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)
STAGE4_ENABLED = True
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# API-–∫–ª—é—á OpenAI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
OPENAI_API_KEY=sk-your-key-here

# –ü—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
HTTPS_PROXY=socks5://172.17.0.1:10808
HTTP_PROXY=socks5://172.17.0.1:10808
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API
docker logs doc_analysis_api

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ React UI
docker logs doc_analysis_ui_react
```

### –û—à–∏–±–∫–∞ "API Error"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 40 –ú–ë)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª

### PDF –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –±—ã–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –°—Ç–∞—Ç—É—Å—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

| –°—Ç–∞—Ç—É—Å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|--------|----------|
| ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª–Ω–µ–Ω–æ** | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø–æ–ª–Ω–æ–º –æ–±—ä–µ–º–µ |
| ‚ö†Ô∏è **–ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–æ** | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ —Å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏ |
| ‚ùå **–ù–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–æ** | –ù–µ –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö |
| ‚ùì **–¢—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è** | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ü–µ–Ω–∫–∏ |

### –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å AI

- **80-100%**: –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–¥–µ–∂–µ–Ω
- **60-79%**: –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- **0-59%**: –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

## üí° –°–æ–≤–µ—Ç—ã

1. **–ö–∞—á–µ—Å—Ç–≤–æ PDF**: –õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞—é—Ç PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º
2. **–†–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: –û–ø—Ç–∏–º–∞–ª—å–Ω–æ 20-50 —Å—Ç—Ä–∞–Ω–∏—Ü
3. **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω–æ –¥–ª—è API
4. **–í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Å—Ç—Ä–∞–Ω–∏—Ü
5. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](README.md)
- [React UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](ui-react-service/README.md)
- [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤](prompts/README.md)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](http://localhost:8002/docs) (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ .env
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ Docker –∏ Docker Compose
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

